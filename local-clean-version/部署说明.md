# 穆桥销售测验系统 - Docker部署指南

## 🚀 快速部署

### 方式一：使用docker-compose（推荐）

1. **确保已安装Docker和docker-compose**
   ```bash
   # 检查Docker是否安装
   docker --version
   docker-compose --version
   ```

2. **进入项目目录**
   ```bash
   cd local-clean-version
   ```

3. **一键启动**
   ```bash
   docker-compose up -d
   ```

4. **访问系统**
   - 后台管理：http://您的服务器IP/admin.html
   - 考试系统：http://您的服务器IP/exam.html
   - 销售链接：http://您的服务器IP/exam.html?mode=sales

### 方式二：使用Docker命令

1. **构建镜像**
   ```bash
   docker build -t neurogen-exam-system .
   ```

2. **运行容器**
   ```bash
   docker run -d --name neurogen-exam-system -p 80:80 neurogen-exam-system
   ```

## 📋 部署前检查清单

### ✅ 必要文件确认
- [x] admin.html - 后台管理页面
- [x] exam.html - 考试页面
- [x] 题库文件（54道题已内置）
- [x] AI分析功能（支持通义千问API）
- [x] 考试记录功能
- [x] Dockerfile和nginx配置

### ✅ 功能验证
- [x] 题库管理（增删改查）
- [x] Excel批量导入
- [x] 考试记录查看
- [x] AI分析报告
- [x] 销售模式（隐藏管理功能）
- [x] 响应式设计（支持手机访问）

## 🔧 配置说明

### 端口配置
- 默认端口：80
- 如需修改端口，编辑docker-compose.yml中的ports配置：
  ```yaml
  ports:
    - "8080:80"  # 将80改为8080
  ```

### AI功能配置
部署后需要配置通义千问API：
1. 访问后台管理 → 系统设置
2. 点击"加载默认配置"
3. 填入您的通义千问API密钥
4. 测试连接成功后保存

### 数据持久化
- 题库数据：存储在浏览器localStorage中
- 考试记录：存储在浏览器localStorage中
- 系统配置：存储在浏览器localStorage中

**注意**：数据存储在客户端，清除浏览器数据会丢失记录。

## 🌐 访问地址

### 管理员使用
- **后台管理**：http://您的IP/admin.html
  - 题库管理
  - 考试记录查看
  - 系统设置
  - 数据导入导出

### 销售人员使用
- **考试系统**：http://您的IP/exam.html?mode=sales
  - 隐藏管理功能
  - 专注考试体验
  - 自动记录成绩

## 📱 移动端支持

系统采用响应式设计，完美支持：
- 📱 手机浏览器
- 📟 平板设备
- 💻 桌面浏览器

## 🛠️ 常用Docker命令

### 查看容器状态
```bash
docker-compose ps
```

### 查看日志
```bash
docker-compose logs -f
```

### 停止服务
```bash
docker-compose down
```

### 重启服务
```bash
docker-compose restart
```

### 更新服务
```bash
docker-compose down
docker-compose up -d --build
```

## 🔒 安全配置

### nginx安全头
已配置以下安全头：
- X-Frame-Options: SAMEORIGIN
- X-Content-Type-Options: nosniff
- X-XSS-Protection: 1; mode=block
- Referrer-Policy: strict-origin-when-cross-origin

### 访问控制
- 禁止访问隐藏文件（.开头的文件）
- 静态文件缓存优化
- HTML文件防缓存（确保更新及时）

## 🚨 故障排除

### 容器无法启动
```bash
# 查看详细错误信息
docker-compose logs

# 检查端口占用
netstat -tulpn | grep :80
```

### 页面无法访问
1. 检查防火墙设置
2. 确认端口映射正确
3. 查看nginx日志：`docker-compose logs nginx`

### 数据丢失问题
- 考试记录存储在浏览器localStorage
- 建议定期在后台管理中导出数据备份
- 清除浏览器数据会丢失所有记录

## 📞 技术支持

如遇问题，请检查：
1. Docker环境是否正常
2. 端口是否被占用
3. 防火墙设置
4. 浏览器控制台错误信息

系统设计为零依赖部署，所有功能都已集成在静态文件中。