<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç©†æ¡¥é”€å”®æµ‹éªŒç³»ç»Ÿ - ç®¡ç†åå° (v2.1)</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif; background: #f8fafc; }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        .header { background: linear-gradient(135deg, #4c51bf 0%, #805ad5 100%); color: white; padding: 30px; text-align: center; border-radius: 10px; margin-bottom: 30px; }
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .stat-card { background: white; padding: 25px; border-radius: 10px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); text-align: center; }
        .stat-value { font-size: 32px; font-weight: bold; color: #4c51bf; margin-bottom: 10px; }
        .stat-label { color: #718096; font-size: 14px; }
        .card { background: white; border-radius: 10px; padding: 30px; margin-bottom: 20px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); }
        .tabs { display: flex; border-bottom: 2px solid #e2e8f0; margin-bottom: 30px; }
        .tab { padding: 15px 25px; cursor: pointer; border-bottom: 3px solid transparent; transition: all 0.3s ease; color: #718096; }
        .tab.active { color: #4c51bf; border-bottom-color: #4c51bf; font-weight: bold; }
        .table { width: 100%; border-collapse: collapse; }
        .table th, .table td { padding: 12px; text-align: left; border-bottom: 1px solid #e2e8f0; }
        .table th { background: #f7fafc; font-weight: bold; color: #4a5568; }
        .table tr:hover { background: #f7fafc; }
        .btn { padding: 8px 16px; border: none; border-radius: 6px; cursor: pointer; transition: all 0.3s ease; text-decoration: none; display: inline-block; }
        .btn-primary { background: #4c51bf; color: white; }
        .btn-primary:hover { background: #434190; }
        .btn-success { background: #48bb78; color: white; }
        .btn-success:hover { background: #38a169; }
        .btn-danger { background: #f56565; color: white; }
        .btn-danger:hover { background: #e53e3e; }
        .loading { text-align: center; padding: 40px; }
        .spinner { border: 4px solid #f3f4f6; border-top: 4px solid #4c51bf; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; margin: 0 auto; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .search-box { width: 100%; padding: 12px; border: 2px solid #e2e8f0; border-radius: 6px; margin-bottom: 20px; font-size: 16px; }
        .search-box:focus { outline: none; border-color: #4c51bf; }
        .score-badge { padding: 4px 8px; border-radius: 4px; color: white; font-weight: bold; }
        .score-excellent { background: #48bb78; }
        .score-good { background: #ed8936; }
        .score-poor { background: #f56565; }
        .modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 1000; }
        .modal-content { background: white; padding: 30px; border-radius: 10px; width: 90%; max-width: 600px; max-height: 80vh; overflow-y: auto; }
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; margin-bottom: 8px; font-weight: bold; color: #4a5568; }
        .form-input { width: 100%; padding: 12px; border: 2px solid #e2e8f0; border-radius: 6px; font-size: 16px; }
        .form-input:focus { outline: none; border-color: #4c51bf; }
        .form-textarea { min-height: 100px; resize: vertical; }
        .checkbox-group { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 10px; max-height: 200px; overflow-y: auto; border: 2px solid #e2e8f0; padding: 15px; border-radius: 6px; }
        .checkbox-item { display: flex; align-items: center; gap: 8px; }
        .status-badge { padding: 4px 8px; border-radius: 4px; color: white; font-size: 12px; font-weight: bold; }
        .status-upcoming { background: #ed8936; }
        .status-active { background: #48bb78; }
        .status-expired { background: #a0aec0; }
        @media (max-width: 768px) {
            .container { padding: 10px; }
            .stats-grid { grid-template-columns: 1fr; }
            .tabs { flex-wrap: wrap; }
            .table { font-size: 14px; overflow-x: auto; }
            .modal-content { padding: 20px; }
            .checkbox-group { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div id="app">
        <div class="container">
            <!-- æ ‡é¢˜ -->
            <div class="header">
                <h1>ğŸ“Š ç©†æ¡¥é”€å”®æµ‹éªŒç³»ç»Ÿ - ç®¡ç†åå° (v2.1)</h1>
                <p>Vue.js + FastAPI ç®¡ç†é¢æ¿ - æ–°å¢é¢˜åº“ç®¡ç†åŠŸèƒ½</p>
            </div>

            <!-- ç»Ÿè®¡å¡ç‰‡ -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value">{{ stats.totalQuestions }}</div>
                    <div class="stat-label">é¢˜åº“æ€»æ•°</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">{{ stats.totalExams }}</div>
                    <div class="stat-label">è€ƒè¯•è®°å½•</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">{{ stats.averageScore }}%</div>
                    <div class="stat-label">å¹³å‡åˆ†æ•°</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">{{ stats.todayExams }}</div>
                    <div class="stat-label">ä»Šæ—¥è€ƒè¯•</div>
                </div>
            </div>

            <!-- é€‰é¡¹å¡ -->
            <div class="card">
                <div class="tabs">
                    <div 
                        class="tab" 
                        :class="{ active: activeTab === 'exams' }"
                        @click="activeTab = 'exams'; loadExamRecords()"
                    >
                        ğŸ“ è€ƒè¯•è®°å½•
                    </div>
                    <div 
                        class="tab" 
                        :class="{ active: activeTab === 'questions' }"
                        @click="activeTab = 'questions'; loadQuestions()"
                    >
                        ğŸ“š é¢˜åº“ç®¡ç†
                    </div>
                    <div 
                        class="tab" 
                        :class="{ active: activeTab === 'exam-management' }"
                        @click="activeTab = 'exam-management'; loadExams()"
                    >
                        ğŸ“ è€ƒè¯•ç®¡ç†
                    </div>
                    <div 
                        class="tab" 
                        :class="{ active: activeTab === 'config' }"
                        @click="activeTab = 'config'; loadConfig()"
                    >
                        âš™ï¸ ç³»ç»Ÿé…ç½®
                    </div>
                </div>

                <!-- è€ƒè¯•è®°å½•æ ‡ç­¾é¡µ -->
                <div v-if="activeTab === 'exams'">
                    <input 
                        type="text" 
                        class="search-box" 
                        placeholder="æœç´¢è€ƒç”Ÿå§“å..." 
                        v-model="examSearch"
                    >
                    
                    <div v-if="loadingExams" class="loading">
                        <div class="spinner"></div>
                        <p style="margin-top: 20px;">åŠ è½½è€ƒè¯•è®°å½•...</p>
                    </div>
                    
                    <table v-else class="table">
                        <thead>
                            <tr>
                                <th>è€ƒç”Ÿå§“å</th>
                                <th>åˆ†æ•°</th>
                                <th>æ­£ç¡®ç‡</th>
                                <th>è€ƒè¯•æ—¶é—´</th>
                                <th>ç”¨æ—¶</th>
                                <th>æ“ä½œ</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr v-for="exam in filteredExams" :key="exam.id">
                                <td>{{ exam.userName || exam.user_name }}</td>
                                <td>
                                    <span 
                                        class="score-badge"
                                        :class="getScoreClass(exam.score)"
                                    >
                                        {{ exam.score }}åˆ†
                                    </span>
                                </td>
                                <td>{{ Math.round((exam.correctCount / exam.totalQuestions) * 100) }}%</td>
                                <td>{{ formatDate(exam.created_at) }}</td>
                                <td>{{ formatDuration(exam.duration) }}</td>
                                <td>
                                    <button class="btn btn-primary" @click="viewExamDetail(exam)">
                                        æŸ¥çœ‹è¯¦æƒ…
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- é¢˜åº“ç®¡ç†æ ‡ç­¾é¡µ -->
                <div v-if="activeTab === 'questions'">
                    <div style="margin-bottom: 20px; display: flex; gap: 10px; flex-wrap: wrap;">
                        <button class="btn btn-success" @click="showAddQuestionModal">
                            â• æ·»åŠ é¢˜ç›®
                        </button>
                        <button class="btn btn-primary" @click="refreshQuestions">
                            ğŸ”„ åˆ·æ–°é¢˜åº“
                        </button>
                        <button class="btn btn-primary" @click="exportQuestions">
                            ğŸ“¥ å¯¼å‡ºé¢˜åº“JSON
                        </button>
                    </div>
                    
                    <div v-if="loadingQuestions" class="loading">
                        <div class="spinner"></div>
                        <p style="margin-top: 20px;">åŠ è½½é¢˜åº“ç»Ÿè®¡...</p>
                    </div>
                    
                    <div v-else-if="questionStats">
                        <!-- é¢˜åº“ç»Ÿè®¡ä¿¡æ¯ -->
                        <div class="stats-grid" style="margin-bottom: 30px;">
                            <div class="stat-card">
                                <div class="stat-value">{{ questionStats.total_questions }}</div>
                                <div class="stat-label">é¢˜ç›®æ€»æ•°</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value">{{ questionStats.statistics.single_choice }}</div>
                                <div class="stat-label">å•é€‰é¢˜</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value">{{ questionStats.statistics.multiple_choice }}</div>
                                <div class="stat-label">å¤šé€‰é¢˜</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value">{{ questionStats.statistics.categories }}</div>
                                <div class="stat-label">åˆ†ç±»æ•°é‡</div>
                            </div>
                        </div>
                        
                        <!-- åˆ†ç±»ç»Ÿè®¡ -->
                        <div style="background: #f7fafc; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                            <h3 style="margin-bottom: 15px; color: #4a5568;">ğŸ“Š åˆ†ç±»ç»Ÿè®¡</h3>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                                <div v-for="(count, category) in questionStats.category_breakdown" :key="category"
                                     style="background: white; padding: 15px; border-radius: 6px; text-align: center;">
                                    <div style="font-weight: bold; color: #4c51bf; font-size: 20px;">{{ count }}</div>
                                    <div style="color: #718096; font-size: 14px;">{{ category }}</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- é¢˜ç›®ç±»å‹ç»Ÿè®¡ -->
                        <div style="background: #f7fafc; padding: 20px; border-radius: 8px;">
                            <h3 style="margin-bottom: 15px; color: #4a5568;">ğŸ“‹ é¢˜ç›®ç±»å‹åˆ†å¸ƒ</h3>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px;">
                                <div v-for="(count, type) in questionStats.type_breakdown" :key="type"
                                     style="background: white; padding: 15px; border-radius: 6px; text-align: center;">
                                    <div style="font-weight: bold; color: #48bb78; font-size: 20px;">{{ count }}</div>
                                    <div style="color: #718096; font-size: 14px;">{{ type }}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- è€ƒè¯•ç®¡ç†æ ‡ç­¾é¡µ -->
                <div v-if="activeTab === 'exam-management'">
                    <!-- æ¯æ—¥è€ƒè¯•è®¾ç½® -->
                    <div style="background: #f7fafc; padding: 20px; border-radius: 8px; margin-bottom: 30px;">
                        <h3 style="margin-bottom: 20px; color: #4a5568;">â° æ¯æ—¥è€ƒè¯•è®¾ç½®</h3>
                        
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 20px;">
                            <div class="form-group">
                                <label>å¼€å§‹æ—¶é—´</label>
                                <input type="time" class="form-input" v-model="dailyExamConfig.start_time">
                            </div>
                            <div class="form-group">
                                <label>ç»“æŸæ—¶é—´</label>
                                <input type="time" class="form-input" v-model="dailyExamConfig.end_time">
                            </div>
                            <div class="form-group">
                                <label>é¢˜ç›®æ•°é‡</label>
                                <input type="number" class="form-input" v-model="dailyExamConfig.question_count" min="1" max="10" readonly>
                                <small style="color: #718096; font-size: 12px;">å›ºå®š3é¢˜</small>
                            </div>
                            <div class="form-group">
                                <label>è€ƒè¯•æ—¶é•¿ï¼ˆåˆ†é’Ÿï¼‰</label>
                                <input type="number" class="form-input" v-model="dailyExamConfig.duration_minutes" min="1" max="60" readonly>
                                <small style="color: #718096; font-size: 12px;">å›ºå®š10åˆ†é’Ÿ</small>
                            </div>
                        </div>
                        
                        <div style="display: flex; gap: 10px; align-items: center;">
                            <button class="btn btn-success" @click="saveDailyExamConfig" :disabled="savingDailyConfig">
                                {{ savingDailyConfig ? 'ä¿å­˜ä¸­...' : 'ğŸ’¾ ä¿å­˜è®¾ç½®' }}
                            </button>
                            <div v-if="dailyConfigStatus" :style="{ color: dailyConfigStatus.success ? '#48bb78' : '#f56565' }">
                                {{ dailyConfigStatus.message }}
                            </div>
                        </div>
                    </div>
                    
                    <!-- æ¯æ—¥è€ƒè¯•ç»Ÿè®¡ -->
                    <div style="background: #f7fafc; padding: 20px; border-radius: 8px; margin-bottom: 30px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h3 style="color: #4a5568;">ğŸ“ˆ æ¯æ—¥è€ƒè¯•ç»Ÿè®¡</h3>
                            <div style="display: flex; gap: 10px;">
                                <input type="date" class="form-input" v-model="selectedReportDate" style="width: auto;">
                                <button class="btn btn-primary" @click="loadDailyReport">æŸ¥çœ‹æŠ¥å‘Š</button>
                                <button class="btn btn-success" @click="generateAllReports">ç”ŸæˆæŠ¥å‘Š</button>
                            </div>
                        </div>
                        
                        <div v-if="dailyReport && dailyReport.has_data">
                            <div class="stats-grid" style="margin-bottom: 20px;">
                                <div class="stat-card">
                                    <div class="stat-value">{{ dailyReport.statistics.total_participants }}</div>
                                    <div class="stat-label">å‚ä¸äººæ•°</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value">{{ dailyReport.statistics.average_score }}</div>
                                    <div class="stat-label">å¹³å‡åˆ†æ•°</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value">{{ formatDuration(dailyReport.statistics.average_duration_seconds) }}</div>
                                    <div class="stat-label">å¹³å‡ç”¨æ—¶</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value">{{ dailyReport.statistics.score_distribution.excellent.percentage }}%</div>
                                    <div class="stat-label">ä¼˜ç§€ç‡(â‰¥90åˆ†)</div>
                                </div>
                            </div>
                            
                            <div style="background: white; padding: 15px; border-radius: 6px;">
                                <h4 style="margin-bottom: 15px; color: #4a5568;">åˆ†æ•°åˆ†å¸ƒ</h4>
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 10px;">
                                    <div style="text-align: center; padding: 10px; background: #48bb78; color: white; border-radius: 4px;">
                                        <div style="font-weight: bold;">{{ dailyReport.statistics.score_distribution.excellent.count }}</div>
                                        <div style="font-size: 12px;">ä¼˜ç§€(90-100)</div>
                                    </div>
                                    <div style="text-align: center; padding: 10px; background: #ed8936; color: white; border-radius: 4px;">
                                        <div style="font-weight: bold;">{{ dailyReport.statistics.score_distribution.good.count }}</div>
                                        <div style="font-size: 12px;">è‰¯å¥½(70-89)</div>
                                    </div>
                                    <div style="text-align: center; padding: 10px; background: #4299e1; color: white; border-radius: 4px;">
                                        <div style="font-weight: bold;">{{ dailyReport.statistics.score_distribution.average.count }}</div>
                                        <div style="font-size: 12px;">åŠæ ¼(60-69)</div>
                                    </div>
                                    <div style="text-align: center; padding: 10px; background: #f56565; color: white; border-radius: 4px;">
                                        <div style="font-weight: bold;">{{ dailyReport.statistics.score_distribution.poor.count }}</div>
                                        <div style="font-size: 12px;">ä¸åŠæ ¼(<60)</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div v-else-if="dailyReport && !dailyReport.has_data" style="text-align: center; padding: 20px; color: #718096;">
                            ğŸ“ {{ selectedReportDate }} æš‚æ— è€ƒè¯•è®°å½•
                        </div>
                    </div>
                    
                    <!-- è€ƒè¯•è®°å½•åˆ—è¡¨ -->
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h3 style="color: #4a5568;">ğŸ“Š è€ƒè¯•è®°å½•</h3>
                        <button class="btn btn-primary" @click="loadExams">
                            ğŸ”„ åˆ·æ–°åˆ—è¡¨
                        </button>
                    </div>
                    
                    <div v-if="loadingExamManagement" class="loading">
                        <div class="spinner"></div>
                        <p style="margin-top: 20px;">åŠ è½½è€ƒè¯•è®°å½•...</p>
                    </div>
                    
                    <table v-else class="table">
                        <thead>
                            <tr>
                                <th>è€ƒè¯•åç§°</th>
                                <th>ç±»å‹</th>
                                <th>é¢˜ç›®æ•°</th>
                                <th>æ—¶é•¿</th>
                                <th>çŠ¶æ€</th>
                                <th>å¼€å§‹æ—¶é—´</th>
                                <th>ç»“æŸæ—¶é—´</th>
                                <th>æ“ä½œ</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr v-for="exam in examList" :key="exam.id">
                                <td>{{ exam.exam_name }}</td>
                                <td>{{ exam.exam_type === 'formal' ? 'æ­£å¼è€ƒè¯•' : 'éšæœºç»ƒä¹ ' }}</td>
                                <td>{{ exam.total_questions }}é¢˜</td>
                                <td>{{ exam.duration_minutes }}åˆ†é’Ÿ</td>
                                <td>
                                    <span 
                                        class="status-badge"
                                        :class="'status-' + exam.status"
                                    >
                                        {{ getStatusText(exam.status) }}
                                    </span>
                                </td>
                                <td>{{ formatDate(exam.start_time) }}</td>
                                <td>{{ formatDate(exam.end_time) }}</td>
                                <td>
                                    <button class="btn btn-primary" @click="viewExamQuestions(exam)" style="margin-right: 5px;">
                                        æŸ¥çœ‹é¢˜ç›®
                                    </button>
                                    <button class="btn btn-danger" @click="deleteExam(exam.id)">
                                        åˆ é™¤
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- ç³»ç»Ÿé…ç½®æ ‡ç­¾é¡µ -->
                <div v-if="activeTab === 'config'">
                    <div v-if="loadingConfig" class="loading">
                        <div class="spinner"></div>
                        <p style="margin-top: 20px;">åŠ è½½é…ç½®...</p>
                    </div>
                    
                    <div v-else>
                        <!-- APIé…ç½®éƒ¨åˆ† -->
                        <div style="background: #f8fafc; padding: 20px; border-radius: 8px; margin-bottom: 30px;">
                            <h3 style="margin-bottom: 20px;">ğŸ¤– AIé…ç½®</h3>
                            
                            <div class="form-group" style="margin-bottom: 20px;">
                                <label>APIæä¾›å•†</label>
                                <select class="form-input" v-model="apiConfig.provider">
                                    <option value="qwen">é€šä¹‰åƒé—® (Qwen)</option>
                                    <option value="openai">OpenAI</option>
                                    <option value="custom">è‡ªå®šä¹‰</option>
                                </select>
                            </div>
                            
                            <div class="form-group" style="margin-bottom: 20px;">
                                <label>APIåœ°å€</label>
                                <input 
                                    type="text" 
                                    class="form-input" 
                                    v-model="apiConfig.url" 
                                    placeholder="https://dashscope.aliyuncs.com/api/v1/services/aigc/text-generation/generation"
                                >
                            </div>
                            
                            <div class="form-group" style="margin-bottom: 20px;">
                                <label>æ¨¡å‹åç§°</label>
                                <input 
                                    type="text" 
                                    class="form-input" 
                                    v-model="apiConfig.model" 
                                    placeholder="qwen-turbo"
                                >
                            </div>
                            
                            <div class="form-group" style="margin-bottom: 20px;">
                                <label>APIå¯†é’¥</label>
                                <input 
                                    type="password" 
                                    class="form-input" 
                                    v-model="apiConfig.key" 
                                    placeholder="è¯·è¾“å…¥APIå¯†é’¥"
                                >
                            </div>
                            
                            <div style="display: flex; gap: 10px; align-items: center;">
                                <button 
                                    class="btn btn-success" 
                                    @click="saveApiConfig"
                                    :disabled="savingConfig"
                                >
                                    {{ savingConfig ? 'ä¿å­˜ä¸­...' : 'ğŸ’¾ ä¿å­˜é…ç½®' }}
                                </button>
                                
                                <button 
                                    class="btn btn-primary" 
                                    @click="testApiConnection"
                                    :disabled="testingConnection || !apiConfig.key"
                                >
                                    {{ testingConnection ? 'æµ‹è¯•ä¸­...' : 'ğŸ”— æµ‹è¯•è¿æ¥' }}
                                </button>
                                
                                <span v-if="connectionStatus" :style="{ color: connectionStatus.success ? '#48bb78' : '#f56565' }">
                                    {{ connectionStatus.message }}
                                </span>
                            </div>
                        </div>
                        
                        <!-- APIçŠ¶æ€æ˜¾ç¤º -->
                        <div style="background: #fff; padding: 20px; border-radius: 8px; border: 2px solid #e2e8f0; margin-bottom: 30px;">
                            <h3 style="margin-bottom: 15px;">ğŸ“Š APIçŠ¶æ€</h3>
                            <p><strong>APIå¯†é’¥çŠ¶æ€:</strong> 
                                <span :style="{ color: (config.apiConfig && config.apiConfig.enabled) ? '#48bb78' : '#f56565' }">
                                    {{ (config.apiConfig && config.apiConfig.enabled) ? 'âœ… å·²é…ç½®' : 'âŒ æœªé…ç½®' }}
                                </span>
                            </p>
                            <p><strong>AIæŠ¥å‘ŠåŠŸèƒ½:</strong> 
                                <span :style="{ color: (config.apiConfig && config.apiConfig.enabled) ? '#48bb78' : '#f56565' }">
                                    {{ (config.apiConfig && config.apiConfig.enabled) ? 'âœ… å¯ç”¨' : 'âŒ ç¦ç”¨' }}
                                </span>
                            </p>
                            <p v-if="config.apiConfig && config.apiConfig.enabled">
                                <strong>å½“å‰æä¾›å•†:</strong> {{ config.apiConfig.provider || 'qwen' }}<br>
                                <strong>å½“å‰æ¨¡å‹:</strong> {{ config.apiConfig.model || 'qwen-turbo' }}
                            </p>
                        </div>
                        
                        <!-- ç³»ç»ŸçŠ¶æ€ -->
                        <div style="background: #fff; padding: 20px; border-radius: 8px; border: 2px solid #e2e8f0;">
                            <h3 style="margin-bottom: 15px;">ğŸ–¥ï¸ ç³»ç»ŸçŠ¶æ€</h3>
                            <p><strong>æ•°æ®åº“è¿æ¥:</strong> <span style="color: #48bb78;">âœ… æ­£å¸¸</span></p>
                            <p><strong>APIæœåŠ¡:</strong> <span style="color: #48bb78;">âœ… è¿è¡Œä¸­</span></p>
                            <p><strong>é¢˜åº“æ•°é‡:</strong> {{ stats.totalQuestions }}é“</p>
                            <p><strong>è€ƒè¯•è®°å½•:</strong> {{ stats.totalExams }}æ¡</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- åˆ›å»ºè€ƒè¯•å¼¹çª— -->
        <div v-if="showExamModal" class="modal" @click="closeModal($event)">
            <div class="modal-content">
                <h2>{{ isEditMode ? 'ç¼–è¾‘è€ƒè¯•' : 'åˆ›å»ºæ–°è€ƒè¯•' }}</h2>
                
                <div class="form-group">
                    <label>è€ƒè¯•åç§°</label>
                    <input type="text" class="form-input" v-model="examForm.exam_name" placeholder="è¯·è¾“å…¥è€ƒè¯•åç§°">
                </div>
                
                <div class="form-group">
                    <label>è€ƒè¯•æè¿°</label>
                    <textarea class="form-input form-textarea" v-model="examForm.description" placeholder="è¯·è¾“å…¥è€ƒè¯•æè¿°ï¼ˆå¯é€‰ï¼‰"></textarea>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div class="form-group">
                        <label>è€ƒè¯•ç±»å‹</label>
                        <select class="form-input" v-model="examForm.exam_type">
                            <option value="formal">æ­£å¼è€ƒè¯•</option>
                            <option value="practice">éšæœºç»ƒä¹ </option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>è€ƒè¯•æ—¶é•¿ï¼ˆåˆ†é’Ÿï¼‰</label>
                        <input type="number" class="form-input" v-model="examForm.duration_minutes" min="1" max="180">
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div class="form-group">
                        <label>å¼€å§‹æ—¶é—´</label>
                        <input type="datetime-local" class="form-input" v-model="examForm.start_time">
                    </div>
                    
                    <div class="form-group">
                        <label>ç»“æŸæ—¶é—´</label>
                        <input type="datetime-local" class="form-input" v-model="examForm.end_time">
                    </div>
                </div>
                
                <div class="form-group">
                    <label>é€‰æ‹©é¢˜ç›®ï¼ˆ{{ selectedQuestions.length }} / {{ availableQuestions.length }}ï¼‰</label>
                    <div class="checkbox-group">
                        <div v-for="question in availableQuestions" :key="question.id" class="checkbox-item">
                            <input 
                                type="checkbox" 
                                :value="question.id" 
                                v-model="selectedQuestions"
                                :id="'q-' + question.id"
                            >
                            <label :for="'q-' + question.id" style="margin: 0; font-weight: normal; cursor: pointer;">
                                {{ question.question.substring(0, 50) }}{{ question.question.length > 50 ? '...' : '' }}
                            </label>
                        </div>
                    </div>
                </div>
                
                <div style="display: flex; justify-content: flex-end; gap: 10px; margin-top: 30px;">
                    <button class="btn btn-primary" @click="closeExamModal">å–æ¶ˆ</button>
                    <button class="btn btn-success" @click="saveExam" :disabled="!canSaveExam">
                        {{ isEditMode ? 'æ›´æ–°' : 'åˆ›å»º' }}
                    </button>
                </div>
            </div>
        </div>
        
        <!-- æ·»åŠ é¢˜ç›®å¼¹çª— -->
        <div v-if="showAddQuestionModal" class="modal" @click="closeAddQuestionModal($event)">
            <div class="modal-content">
                <h2>æ·»åŠ æ–°é¢˜ç›®</h2>
                
                <div class="form-group">
                    <label>é¢˜ç›®åˆ†ç±»</label>
                    <input type="text" class="form-input" v-model="questionForm.category" placeholder="è¯·è¾“å…¥é¢˜ç›®åˆ†ç±»ï¼ˆå¦‚ï¼šäº§å“çŸ¥è¯†ã€é”€å”®æŠ€å·§ç­‰ï¼‰">
                </div>
                
                <div class="form-group">
                    <label>é¢˜ç›®ç±»å‹</label>
                    <select class="form-input" v-model="questionForm.question_type">
                        <option value="single">å•é€‰é¢˜</option>
                        <option value="multiple">å¤šé€‰é¢˜</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>é¢˜ç›®å†…å®¹</label>
                    <textarea class="form-input form-textarea" v-model="questionForm.question" placeholder="è¯·è¾“å…¥é¢˜ç›®å†…å®¹"></textarea>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div class="form-group">
                        <label>é€‰é¡¹A</label>
                        <input type="text" class="form-input" v-model="questionForm.option_a" placeholder="é€‰é¡¹Aå†…å®¹">
                    </div>
                    
                    <div class="form-group">
                        <label>é€‰é¡¹B</label>
                        <input type="text" class="form-input" v-model="questionForm.option_b" placeholder="é€‰é¡¹Bå†…å®¹">
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div class="form-group">
                        <label>é€‰é¡¹Cï¼ˆå¯é€‰ï¼‰</label>
                        <input type="text" class="form-input" v-model="questionForm.option_c" placeholder="é€‰é¡¹Cå†…å®¹">
                    </div>
                    
                    <div class="form-group">
                        <label>é€‰é¡¹Dï¼ˆå¯é€‰ï¼‰</label>
                        <input type="text" class="form-input" v-model="questionForm.option_d" placeholder="é€‰é¡¹Då†…å®¹">
                    </div>
                </div>
                
                <div class="form-group">
                    <label>æ­£ç¡®ç­”æ¡ˆ</label>
                    <input type="text" class="form-input" v-model="questionForm.answer" 
                           :placeholder="questionForm.question_type === 'single' ? 'è¾“å…¥æ­£ç¡®ç­”æ¡ˆï¼ˆå¦‚ï¼šAï¼‰' : 'è¾“å…¥æ­£ç¡®ç­”æ¡ˆï¼ˆå¦‚ï¼šAB æˆ– ACDï¼‰'">
                    <small style="color: #718096; font-size: 12px; margin-top: 5px; display: block;">
                        {{ questionForm.question_type === 'single' ? 'å•é€‰é¢˜è¯·è¾“å…¥ä¸€ä¸ªé€‰é¡¹å­—æ¯' : 'å¤šé€‰é¢˜è¯·è¾“å…¥å¤šä¸ªé€‰é¡¹å­—æ¯ï¼Œæ— ç©ºæ ¼' }}
                    </small>
                </div>
                
                <div class="form-group">
                    <label>ç­”æ¡ˆè§£æï¼ˆå¯é€‰ï¼‰</label>
                    <textarea class="form-input form-textarea" v-model="questionForm.explanation" placeholder="è¯·è¾“å…¥ç­”æ¡ˆè§£æ"></textarea>
                </div>
                
                <div style="display: flex; justify-content: flex-end; gap: 10px; margin-top: 30px;">
                    <button class="btn btn-primary" @click="closeAddQuestionModal">å–æ¶ˆ</button>
                    <button class="btn btn-success" @click="saveQuestion" :disabled="!canSaveQuestion">
                        æ·»åŠ é¢˜ç›®
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const { createApp } = Vue;

        createApp({
            data() {
                return {
                    activeTab: 'exams',
                    examSearch: '',
                    loadingExams: false,
                    loadingQuestions: false,
                    loadingConfig: false,
                    loadingExamManagement: false,
                    examRecords: [],
                    questionBank: {},
                    questionStats: null,
                    config: {},
                    examList: [],
                    availableQuestions: [],
                    showExamModal: false,
                    showAddQuestionModal: false,
                    isEditMode: false,
                    selectedQuestions: [],
                    examForm: {
                        exam_name: '',
                        description: '',
                        exam_type: 'formal',
                        duration_minutes: 30,
                        start_time: '',
                        end_time: ''
                    },
                    questionForm: {
                        category: '',
                        question_type: 'single',
                        question: '',
                        option_a: '',
                        option_b: '',
                        option_c: '',
                        option_d: '',
                        answer: '',
                        explanation: ''
                    },
                    // æ¯æ—¥è€ƒè¯•é…ç½®
                    dailyExamConfig: {
                        start_time: '08:00',
                        end_time: '20:00',
                        question_count: 3,
                        duration_minutes: 10
                    },
                    savingDailyConfig: false,
                    dailyConfigStatus: null,
                    // æ¯æ—¥æŠ¥å‘Šç›¸å…³
                    selectedReportDate: new Date().toISOString().split('T')[0],
                    dailyReport: null,
                    // APIé…ç½®
                    apiConfig: {
                        provider: 'qwen',
                        url: 'https://dashscope.aliyuncs.com/api/v1/services/aigc/text-generation/generation',
                        model: 'qwen-turbo',
                        key: ''
                    },
                    savingConfig: false,
                    testingConnection: false,
                    connectionStatus: null,
                    stats: {
                        totalQuestions: 0,
                        totalExams: 0,
                        averageScore: 0,
                        todayExams: 0
                    },
                    apiBase: 'http://127.0.0.1:8002/api'
                }
            },
            computed: {
                filteredExams() {
                    if (!this.examSearch) return this.examRecords;
                    return this.examRecords.filter(exam => 
                        (exam.userName || exam.user_name || '').toLowerCase()
                            .includes(this.examSearch.toLowerCase())
                    );
                },
                canSaveExam() {
                    return this.examForm.exam_name.trim() && 
                           this.examForm.start_time && 
                           this.examForm.end_time && 
                           this.selectedQuestions.length > 0;
                },
                canSaveQuestion() {
                    return this.questionForm.category.trim() && 
                           this.questionForm.question.trim() && 
                           this.questionForm.option_a.trim() && 
                           this.questionForm.option_b.trim() && 
                           this.questionForm.answer.trim();
                }
            },
            mounted() {
                this.loadStats();
                this.loadExamRecords();
            },
            methods: {
                async loadStats() {
                    try {
                        // è·å–é¢˜åº“ç»Ÿè®¡
                        const questionsRes = await axios.get(`${this.apiBase}/master-questions`);
                        this.stats.totalQuestions = questionsRes.data.totalQuestions;
                        
                        // è·å–è€ƒè¯•è®°å½•ç»Ÿè®¡
                        const examsRes = await axios.get(`${this.apiBase}/exam-records`);
                        const exams = examsRes.data;
                        this.stats.totalExams = exams.length;
                        
                        if (exams.length > 0) {
                            const totalScore = exams.reduce((sum, exam) => sum + exam.score, 0);
                            this.stats.averageScore = Math.round(totalScore / exams.length);
                            
                            // è®¡ç®—ä»Šæ—¥è€ƒè¯•æ•°
                            const today = new Date().toDateString();
                            this.stats.todayExams = exams.filter(exam => 
                                new Date(exam.created_at).toDateString() === today
                            ).length;
                        }
                    } catch (error) {
                        console.error('åŠ è½½ç»Ÿè®¡ä¿¡æ¯å¤±è´¥:', error);
                    }
                },
                async loadExamRecords() {
                    this.loadingExams = true;
                    try {
                        const response = await axios.get(`${this.apiBase}/exam-records`);
                        this.examRecords = response.data;
                    } catch (error) {
                        alert('åŠ è½½è€ƒè¯•è®°å½•å¤±è´¥: ' + error.message);
                    } finally {
                        this.loadingExams = false;
                    }
                },
                async loadQuestions() {
                    this.loadingQuestions = true;
                    try {
                        const response = await axios.get(`${this.apiBase}/questions/stats`);
                        this.questionStats = response.data;
                    } catch (error) {
                        alert('åŠ è½½é¢˜åº“ç»Ÿè®¡å¤±è´¥: ' + error.message);
                    } finally {
                        this.loadingQuestions = false;
                    }
                },
                async loadConfig() {
                    this.loadingConfig = true;
                    try {
                        const response = await axios.get(`${this.apiBase}/master-config`);
                        this.config = response.data;
                        
                        // å¦‚æœå·²æœ‰é…ç½®ï¼ŒåŠ è½½åˆ°è¡¨å•ä¸­
                        if (this.config.apiConfig) {
                            this.apiConfig = {
                                provider: this.config.apiConfig.provider || 'qwen',
                                url: this.config.apiConfig.url || 'https://dashscope.aliyuncs.com/api/v1/services/aigc/text-generation/generation',
                                model: this.config.apiConfig.model || 'qwen-turbo',
                                key: this.config.apiConfig.key || ''
                            };
                        }
                    } catch (error) {
                        alert('åŠ è½½é…ç½®å¤±è´¥: ' + error.message);
                    } finally {
                        this.loadingConfig = false;
                    }
                },
                async refreshQuestions() {
                    await this.loadQuestions();
                    await this.loadStats();
                    alert('é¢˜åº“å·²åˆ·æ–°');
                },
                
                // é¢˜åº“ç®¡ç†æ–¹æ³•
                showAddQuestionModal() {
                    this.resetQuestionForm();
                    this.showAddQuestionModal = true;
                },
                
                resetQuestionForm() {
                    this.questionForm = {
                        category: '',
                        question_type: 'single',
                        question: '',
                        option_a: '',
                        option_b: '',
                        option_c: '',
                        option_d: '',
                        answer: '',
                        explanation: ''
                    };
                },
                
                closeAddQuestionModal(event) {
                    if (event && !event.target.classList.contains('modal')) {
                        return;
                    }
                    this.showAddQuestionModal = false;
                    this.resetQuestionForm();
                },
                
                async saveQuestion() {
                    if (!this.canSaveQuestion) {
                        alert('è¯·å¡«å†™å®Œæ•´çš„é¢˜ç›®ä¿¡æ¯');
                        return;
                    }
                    
                    try {
                        const response = await axios.post(`${this.apiBase}/questions`, this.questionForm);
                        
                        alert('é¢˜ç›®æ·»åŠ æˆåŠŸï¼');
                        this.closeAddQuestionModal();
                        this.loadQuestions();
                        this.loadStats();
                        
                    } catch (error) {
                        alert('æ·»åŠ é¢˜ç›®å¤±è´¥: ' + error.message);
                        console.error(error);
                    }
                },
                
                async exportQuestions() {
                    try {
                        const response = await axios.get(`${this.apiBase}/questions/export`);
                        
                        // åˆ›å»ºä¸‹è½½é“¾æ¥
                        const blob = new Blob([JSON.stringify(response.data, null, 2)], {
                            type: 'application/json'
                        });
                        const url = window.URL.createObjectURL(blob);
                        const link = document.createElement('a');
                        link.href = url;
                        link.download = `é¢˜åº“å¯¼å‡º_${new Date().toISOString().slice(0,10)}.json`;
                        document.body.appendChild(link);
                        link.click();
                        document.body.removeChild(link);
                        window.URL.revokeObjectURL(url);
                        
                        alert('é¢˜åº“å¯¼å‡ºæˆåŠŸï¼');
                        
                    } catch (error) {
                        alert('å¯¼å‡ºé¢˜åº“å¤±è´¥: ' + error.message);
                        console.error(error);
                    }
                },
                viewExamDetail(exam) {
                    alert(`è€ƒè¯•è¯¦æƒ…ï¼š\nå§“å: ${exam.userName || exam.user_name}\nåˆ†æ•°: ${exam.score}åˆ†\nç”¨æ—¶: ${this.formatDuration(exam.duration)}`);
                },
                getScoreClass(score) {
                    if (score >= 90) return 'score-excellent';
                    if (score >= 70) return 'score-good';
                    return 'score-poor';
                },
                formatDate(dateString) {
                    if (!dateString) return '-';
                    return new Date(dateString).toLocaleString('zh-CN');
                },
                formatDuration(seconds) {
                    if (!seconds) return '-';
                    const mins = Math.floor(seconds / 60);
                    const secs = seconds % 60;
                    return `${mins}åˆ†${secs}ç§’`;
                },
                
                // è€ƒè¯•ç®¡ç†æ–¹æ³•
                async loadExams() {
                    this.loadingExamManagement = true;
                    try {
                        const response = await axios.get(`${this.apiBase}/exams`);
                        this.examList = response.data;
                    } catch (error) {
                        alert('åŠ è½½è€ƒè¯•åˆ—è¡¨å¤±è´¥: ' + error.message);
                    } finally {
                        this.loadingExamManagement = false;
                    }
                },
                
                async loadAvailableQuestions() {
                    try {
                        const response = await axios.get(`${this.apiBase}/questions`);
                        this.availableQuestions = response.data;
                    } catch (error) {
                        console.error('åŠ è½½é¢˜ç›®å¤±è´¥:', error);
                    }
                },
                
                async showCreateExamModal() {
                    this.isEditMode = false;
                    this.resetExamForm();
                    await this.loadAvailableQuestions();
                    this.showExamModal = true;
                },
                
                resetExamForm() {
                    this.examForm = {
                        exam_name: '',
                        description: '',
                        exam_type: 'formal',
                        duration_minutes: 30,
                        start_time: '',
                        end_time: ''
                    };
                    this.selectedQuestions = [];
                },
                
                closeExamModal() {
                    this.showExamModal = false;
                    this.resetExamForm();
                },
                
                closeModal(event) {
                    if (event.target.classList.contains('modal')) {
                        this.closeExamModal();
                    }
                },
                
                async saveExam() {
                    if (!this.canSaveExam) {
                        alert('è¯·å¡«å†™å®Œæ•´ä¿¡æ¯');
                        return;
                    }
                    
                    try {
                        const examData = {
                            ...this.examForm,
                            question_ids: this.selectedQuestions
                        };
                        
                        const response = await axios.post(`${this.apiBase}/exams`, examData);
                        
                        alert('è€ƒè¯•åˆ›å»ºæˆåŠŸï¼');
                        this.closeExamModal();
                        this.loadExams();
                        this.loadStats();
                        
                    } catch (error) {
                        alert('åˆ›å»ºè€ƒè¯•å¤±è´¥: ' + error.message);
                        console.error(error);
                    }
                },
                
                async deleteExam(examId) {
                    if (!confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªè€ƒè¯•å—ï¼Ÿ')) {
                        return;
                    }
                    
                    try {
                        await axios.delete(`${this.apiBase}/exams/${examId}`);
                        alert('è€ƒè¯•åˆ é™¤æˆåŠŸï¼');
                        this.loadExams();
                        this.loadStats();
                    } catch (error) {
                        alert('åˆ é™¤è€ƒè¯•å¤±è´¥: ' + error.message);
                    }
                },
                
                async viewExamQuestions(exam) {
                    try {
                        const response = await axios.get(`${this.apiBase}/exams/${exam.id}`);
                        const examDetail = response.data;
                        const questions = examDetail.questions.map(q => q.question.substring(0, 100) + '...').join('\n');
                        alert(`è€ƒè¯•é¢˜ç›® (${examDetail.total_questions}é“):\n\n${questions}`);
                    } catch (error) {
                        alert('è·å–è€ƒè¯•è¯¦æƒ…å¤±è´¥: ' + error.message);
                    }
                },
                
                getStatusText(status) {
                    const statusMap = {
                        'upcoming': 'æœªå¼€å§‹',
                        'active': 'è¿›è¡Œä¸­', 
                        'expired': 'å·²ç»“æŸ'
                    };
                    return statusMap[status] || status;
                },
                
                // æ¯æ—¥è€ƒè¯•é…ç½®æ–¹æ³•
                async saveDailyExamConfig() {
                    this.savingDailyConfig = true;
                    this.dailyConfigStatus = null;
                    
                    try {
                        const configData = {
                            daily_exam_start_time: this.dailyExamConfig.start_time,
                            daily_exam_end_time: this.dailyExamConfig.end_time,
                            daily_exam_question_count: this.dailyExamConfig.question_count,
                            daily_exam_duration_minutes: this.dailyExamConfig.duration_minutes
                        };
                        
                        const response = await axios.post(`${this.apiBase}/daily-exam-config`, configData);
                        
                        if (response.data.success) {
                            this.dailyConfigStatus = {
                                success: true,
                                message: 'âœ… æ¯æ—¥è€ƒè¯•è®¾ç½®ä¿å­˜æˆåŠŸï¼'
                            };
                        } else {
                            this.dailyConfigStatus = {
                                success: false,
                                message: 'âŒ ä¿å­˜å¤±è´¥: ' + response.data.message
                            };
                        }
                        
                    } catch (error) {
                        this.dailyConfigStatus = {
                            success: false,
                            message: 'âŒ ä¿å­˜å¤±è´¥: ' + error.message
                        };
                        console.error(error);
                    } finally {
                        this.savingDailyConfig = false;
                    }
                },
                
                // æ¯æ—¥æŠ¥å‘Šç›¸å…³æ–¹æ³•
                async loadDailyReport() {
                    try {
                        const response = await axios.get(`${this.apiBase}/daily-exam-report`, {
                            params: { date: this.selectedReportDate }
                        });
                        this.dailyReport = response.data;
                    } catch (error) {
                        alert('åŠ è½½æ¯æ—¥æŠ¥å‘Šå¤±è´¥: ' + error.message);
                        console.error(error);
                    }
                },
                
                async generateAllReports() {
                    try {
                        const response = await axios.post(`${this.apiBase}/generate-daily-reports`);
                        
                        if (response.data.success) {
                            alert(`âœ… ${response.data.message}`);
                            // é‡æ–°åŠ è½½å½“å‰æ—¥æœŸçš„æŠ¥å‘Š
                            await this.loadDailyReport();
                        } else {
                            alert('âŒ ç”ŸæˆæŠ¥å‘Šå¤±è´¥: ' + response.data.message);
                        }
                        
                    } catch (error) {
                        alert('âŒ ç”ŸæˆæŠ¥å‘Šå¤±è´¥: ' + error.message);
                        console.error(error);
                    }
                },
                
                // APIé…ç½®ç›¸å…³æ–¹æ³•
                async saveApiConfig() {
                    this.savingConfig = true;
                    this.connectionStatus = null;
                    
                    try {
                        const configData = {
                            provider: this.apiConfig.provider,
                            url: this.apiConfig.url,
                            model: this.apiConfig.model,
                            key: this.apiConfig.key,
                            enabled: true
                        };
                        
                        const response = await axios.post(`${this.apiBase}/api-config`, configData);
                        
                        if (response.data.success) {
                            alert('âœ… APIé…ç½®ä¿å­˜æˆåŠŸï¼');
                            await this.loadConfig(); // é‡æ–°åŠ è½½é…ç½®
                            await this.loadStats(); // æ›´æ–°ç»Ÿè®¡
                        } else {
                            alert('âŒ APIé…ç½®ä¿å­˜å¤±è´¥: ' + response.data.message);
                        }
                        
                    } catch (error) {
                        alert('âŒ ä¿å­˜é…ç½®å¤±è´¥: ' + error.message);
                        console.error(error);
                    } finally {
                        this.savingConfig = false;
                    }
                },
                
                async testApiConnection() {
                    this.testingConnection = true;
                    this.connectionStatus = null;
                    
                    try {
                        const testData = {
                            provider: this.apiConfig.provider,
                            url: this.apiConfig.url,
                            model: this.apiConfig.model,
                            key: this.apiConfig.key
                        };
                        
                        const response = await axios.post(`${this.apiBase}/test-api-connection`, testData);
                        
                        if (response.data.success) {
                            this.connectionStatus = {
                                success: true,
                                message: 'âœ… è¿æ¥æˆåŠŸï¼'
                            };
                        } else {
                            this.connectionStatus = {
                                success: false,
                                message: 'âŒ è¿æ¥å¤±è´¥: ' + response.data.error
                            };
                        }
                        
                    } catch (error) {
                        this.connectionStatus = {
                            success: false,
                            message: 'âŒ æµ‹è¯•å¤±è´¥: ' + error.message
                        };
                        console.error(error);
                    } finally {
                        this.testingConnection = false;
                    }
                }
            }
        }).mount('#app');
    </script>
</body>
</html>