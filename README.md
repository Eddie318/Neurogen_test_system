# 穆桥销售测验系统

## 📖 项目简介

穆桥销售测验系统是一个专为销售团队设计的在线考试平台，采用**集中化管理架构**，题库和API配置只能由管理员线下维护，维护后自动同步到所有访问页面，确保内容的统一性和安全性。

## 🏗️ 集中化管理架构

### 核心理念
- **管理员专属维护**：只有管理员能修改题库和API配置
- **自动分发同步**：修改后所有页面自动获取最新数据  
- **安全权限分离**：销售端只看题目，管理端只能查看记录
- **版本统一控制**：确保所有用户看到相同的最新内容

## ✨ 核心功能

### 🎯 集中化题库管理
- **线下维护**：只有管理员能修改题库文件
- **自动同步**：修改后所有页面自动获取最新题库
- **题目类型**：支持单选题和多选题
- **分类管理**：疾病、指南、ASM、开浦兰、维派特、优普洛等
- **版本控制**：题库版本管理和更新追踪
- **内置题库**：预装54道专业题目

### 📝 考试系统
- **随机抽题**：从题库中随机选择15道题目
- **限时考试**：30分钟考试时限，实时倒计时
- **即时评分**：考试结束自动计算分数和正确率
- **答题记录**：保存详细的答题过程和结果
- **响应式设计**：完美支持手机、平板、电脑访问

### 📊 考试记录管理
- **记录查看**：按时间、姓名、分数筛选考试记录
- **详情展示**：查看每道题的详细答题情况
- **数据导出**：支持CSV格式导出所有考试记录
- **统计分析**：总次数、平均分、及格率等统计信息
- **智能清理**：按时间清理历史记录，防止存储溢出

### 🤖 AI智能分析
- **支持API**：通义千问（推荐）、DeepSeek
- **智能评估**：基于考试结果生成个性化学习建议
- **专业报告**：针对销售人员的专业知识点分析
- **一键生成**：考试完成后一键生成AI分析报告

### 🔐 三层权限设计
- **管理员维护**：线下文件维护，完全控制题库和配置
- **管理端查看**：只读查看题库和考试记录，无编辑权限
- **销售端考试**：只能考试，看不到答案和管理功能
- **权限控制**：通过URL参数和API权限严格控制访问

### 💾 存储管理
- **使用监控**：实时监控localStorage使用情况
- **智能预警**：存储空间不足时自动提醒
- **自动清理**：按时间策略清理旧记录
- **数据备份**：支持数据导出备份

## 🏗️ 技术架构

### 前端技术
- **HTML5 + CSS3**：响应式布局，支持移动端
- **Vanilla JavaScript**：原生JS，无框架依赖
- **SheetJS**：Excel文件解析和处理
- **localStorage**：本地数据存储

### 部署技术
- **Docker**：容器化部署
- **Nginx**：静态文件服务和反向代理
- **跨平台**：支持Windows、Linux、macOS

## 📁 项目结构

```
local-clean-version/
├── admin.html              # 后台管理主页面
├── exam.html               # 考试系统主页面
├── index.html              # 项目首页
├── excel-import.js         # Excel导入功能
├── initial-questions.json  # 初始题库数据(54题)
├── 404.html               # 404错误页面
├── 50x.html               # 服务器错误页面
├── Dockerfile             # Docker镜像构建文件
├── docker-compose.yml     # Docker编排文件
├── nginx.conf             # Nginx配置文件
├── .dockerignore          # Docker忽略文件
├── start.sh               # Linux/Mac启动脚本
├── start.bat              # Windows启动脚本
├── 使用说明.md            # 系统使用说明
├── 部署说明.md            # 详细部署文档
└── AI分析功能使用说明.md   # AI功能配置说明
```

## 🚀 快速部署

### 方式一：一键脚本部署（推荐）

**Windows用户：**
```bash
# 双击运行
start.bat
```

**Linux/Mac用户：**
```bash
# 进入项目目录
cd local-clean-version

# 运行启动脚本
./start.sh
```

### 方式二：手动Docker部署

```bash
# 1. 进入项目目录
cd local-clean-version

# 2. 使用docker-compose启动
docker-compose up -d

# 3. 查看状态
docker-compose ps
```

### 方式三：原生Docker命令

```bash
# 1. 构建镜像
docker build -t neurogen-exam-system .

# 2. 运行容器
docker run -d --name neurogen-exam-system -p 80:80 neurogen-exam-system
```

## 🌐 访问地址

部署完成后，可通过以下地址访问：

- **后台管理**：http://您的IP/admin.html
- **考试系统**：http://您的IP/exam.html
- **销售专用链接**：http://您的IP/exam.html?mode=sales

> 💡 将`您的IP`替换为实际的服务器IP地址，本地部署使用`localhost`

## ⚙️ 集中化维护配置

### 1. 配置AI分析功能

编辑 `/data/master-config.json` 文件：
```json
{
  "version": 2,
  "lastUpdate": "2025-01-22T12:00:00Z",
  "apiConfig": {
    "provider": "qwen",
    "url": "https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions",
    "model": "qwen-turbo",
    "key": "您的通义千问API密钥",
    "enabled": true
  }
}
```

> 📝 API密钥获取：访问 [阿里云DashScope控制台](https://dashscope.console.aliyun.com/)

### 2. 维护题库内容

编辑 `/data/master-questions.json` 文件：
- 系统已内置54道专业题目
- 支持添加、修改、删除题目
- 每次修改请递增版本号
- 详细格式请参考 `管理员维护指南.md`

### 3. 分享销售链接

将以下链接分享给销售人员：
```
http://您的IP/exam.html?mode=sales
```

## 📱 移动端支持

系统采用响应式设计，完美支持：
- 📱 手机浏览器（iOS Safari、Android Chrome）
- 📟 平板设备
- 💻 桌面浏览器
- 🧭 微信内置浏览器

## 🔧 集中化管理维护

### 配置文件维护

```bash
# 修改主配置
vi data/master-config.json

# 修改主题库  
vi data/master-questions.json

# 应用更新（重启容器）
docker-compose restart

# 重新构建（推荐）
docker-compose down && docker-compose up -d --build
```

### 数据管理

- **考试记录**：在管理端查看所有考试记录
- **题库状态**：管理端显示题库版本和统计信息
- **配置查看**：管理端显示当前API配置状态
- **数据备份**：定期备份 `/data/` 目录下的配置文件

### 维护检查清单

- [ ] 定期更新题库内容
- [ ] 检查API密钥有效性
- [ ] 备份配置和题库文件
- [ ] 监控系统运行状态
- [ ] 验证版本号正确递增

## 📋 功能详情

### 管理员维护功能（线下）
- ✅ 题库文件维护（master-questions.json）
- ✅ API配置维护（master-config.json）
- ✅ 版本控制管理
- ✅ 分类和内容管理

### 管理端查看功能（只读）
- ✅ 题库查看（版本、统计、内容）
- ✅ 考试记录（查看、筛选、导出）
- ✅ 配置查看（API状态显示）
- ✅ 存储管理（监控、清理）
- ✅ 数据导出（CSV格式）

### 考试系统功能
- ✅ 用户信息（姓名输入）
- ✅ 随机抽题（15题/次）
- ✅ 限时考试（30分钟）
- ✅ 实时答题（支持修改）
- ✅ 自动评分（分数+正确率）
- ✅ AI分析报告（智能生成）

### 销售模式功能
- ✅ 简化界面（隐藏管理入口）
- ✅ 专注考试体验
- ✅ 自动记录成绩
- ✅ 移动端优化

## 🛠️ 故障排除

### 常见问题

**Q: 容器启动失败？**
A: 检查端口占用，运行 `netstat -tulpn | grep :80`

**Q: 页面无法访问？**
A: 检查防火墙设置，确认端口80已开放

**Q: AI分析功能不可用？**
A: 检查API密钥配置，确认网络连接正常

**Q: 考试记录丢失？**
A: 数据存储在浏览器localStorage，清除浏览器数据会丢失记录

### 技术支持

如遇问题，请按以下顺序检查：
1. Docker服务是否正常运行
2. 端口是否被占用
3. 防火墙设置是否正确
4. 浏览器控制台是否有错误信息

## 📄 许可证

本项目采用 MIT 许可证 - 详见 [LICENSE](LICENSE) 文件

## 🙏 致谢

感谢以下开源项目的支持：
- [SheetJS](https://sheetjs.com/) - Excel文件处理
- [Nginx](https://nginx.org/) - 高性能Web服务器
- [Docker](https://www.docker.com/) - 容器化平台

## 📖 重要文档

- **管理员维护指南.md** - 详细的配置文件维护说明
- **使用说明.md** - 系统使用说明
- **部署说明.md** - 详细部署文档
- **AI分析功能使用说明.md** - AI功能配置说明

---

**🔐 集中化管理架构确保系统的安全性和一致性**

- 只有管理员能修改题库和配置，防止误操作
- 所有页面自动同步最新内容，无需手动更新
- 权限分离设计，销售端安全可靠
- 版本控制机制，变更可追踪

**🚀 立即开始使用，为您的销售团队提供专业、安全、统一的知识测评平台！**